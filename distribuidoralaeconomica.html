<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distribuidora la Econ√≥mica - San Rafael</title>
    <meta name="description" content="Distribuidora la Econ√≥mica - La mejor de San Rafael. Productos mayoristas y distribuci√≥n.">
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'e-rojo': '#DC2626', 
                        'e-rojo-dark': '#B91C1C',
                        'e-rojo-light': '#FEE2E2',
                        'e-azul': '#1e40af',
                        'e-azul-dark': '#1e3a8a',
                        'e-amarillo': '#fbbf24',
                        'e-verde': '#10b981',
                        'e-verde-dark': '#059669',
                    }
                }
            }
        }
    </script>
    
    <!-- Custom Styles -->
    <style>
        body { 
            font-family: 'Arial', sans-serif; 
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);
        }
        
        .brand-logo {
            filter: grayscale(100%) brightness(0) invert(1);
            opacity: 0.8;
        }
        
        .brand-logo:hover {
            filter: grayscale(0%) brightness(1);
            opacity: 1;
        }
        
        .floating-whatsapp {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
    </style>
</head>

<body class="bg-gray-50">

    <!-- Main Navigation -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between py-4">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="bg-e-rojo p-2 rounded-lg">
                        <i class="fas fa-truck text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-e-rojo">LA ECON√ìMICA</h1>
                        <p class="text-xs text-gray-600">Distribuidora San Rafael</p>
                    </div>
                </div>

                <!-- Navigation Links -->
                <div class="hidden md:flex items-center space-x-6">
                    <a href="productos-tienda.html" class="text-e-rojo hover:text-e-rojo-dark font-semibold transition-colors">Productos</a>
                    <a href="#nosotros" class="text-e-rojo hover:text-e-rojo-dark font-semibold transition-colors">Nosotros</a>
                    <a href="#contacto" class="text-e-rojo hover:text-e-rojo-dark font-semibold transition-colors">Contacto</a>
                </div>

                <!-- Search Bar and Cart -->
                <div class="hidden md:flex items-center space-x-4">
                    <a href="index.html" class="flex items-center space-x-2 bg-e-verde hover:bg-e-verde-dark text-white px-4 py-2 rounded-lg transition font-medium">
                        <i class="fas fa-home"></i>
                        <span>Volver al Inicio</span>
                    </a>
                    <div class="relative">
                        <input type="text" placeholder="Buscar productos..." 
                               class="w-64 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-e-rojo focus:border-transparent">
                        <i class="fas fa-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                    <!-- Cart Button -->
                    <button id="open-cart-btn" class="relative bg-e-rojo text-white px-4 py-2 rounded-lg hover:bg-e-rojo-dark transition-colors">
                        <i class="fas fa-shopping-cart mr-2"></i>Carrito
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-e-amarillo text-e-rojo-dark text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </button>
            </div>

                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden text-e-rojo">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
            </div>
        </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="md:hidden fixed top-0 left-0 w-full h-full bg-black bg-opacity-90 z-40 transform translate-x-full transition-transform duration-300 ease-in-out">
        <div class="flex justify-end p-4">
            <button id="close-mobile-menu" class="text-white text-2xl">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="flex flex-col items-center justify-center h-full space-y-8">
            <a href="index.html" class="text-white text-2xl font-semibold hover:text-e-amarillo transition-colors mobile-menu-link">üè† P√°gina Principal</a>
            <a href="#inicio" class="text-white text-2xl font-semibold hover:text-e-amarillo transition-colors mobile-menu-link">Inicio</a>
            <a href="productos-tienda.html" class="text-white text-2xl font-semibold hover:text-e-amarillo transition-colors mobile-menu-link">Productos</a>
            <a href="#nosotros" class="text-white text-2xl font-semibold hover:text-e-amarillo transition-colors mobile-menu-link">Qui√©nes Somos</a>
        </div>
    </div>

    <!-- Hero Section -->
    <section id="inicio" class="hero-gradient text-white py-16">
        <div class="container mx-auto px-4">
            <div class="text-center">
                <h2 class="text-5xl md:text-6xl font-bold mb-6">Distribuidora la Econ√≥mica</h2>
                <p class="text-xl mb-8 text-red-100">Productos de calidad al mejor precio en San Rafael</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="productos-tienda.html" class="bg-e-amarillo text-e-rojo-dark px-8 py-4 rounded-lg font-bold text-lg hover:bg-yellow-400 transition-colors transform hover:scale-105 shadow-lg">
                        <i class="fas fa-box mr-2"></i>Ver Productos
                    </a>
                    <a href="#contacto" class="bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-white hover:text-e-rojo transition-colors transform hover:scale-105">
                        <i class="fas fa-phone mr-2"></i>Contactar
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Products Section -->
    <section id="productos" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-e-rojo mb-8 text-center">Productos Destacados</h2>
            <p class="text-center text-gray-600 mb-8">Una muestra de nuestros productos. <a href="productos-tienda.html" class="text-e-rojo hover:text-e-rojo-dark font-semibold">Ver todos los productos ‚Üí</a></p>
            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6">
                <!-- Product Cards -->
                <div class="product-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                    <div class="h-32 rounded-lg mb-3 overflow-hidden">
                        <img src="img/image.png" alt="Producto 1" class="w-full h-full object-cover">
                </div>
                    <h3 class="font-semibold text-sm text-gray-800">Producto 1</h3>
                    <p class="text-xs text-gray-600">Descripci√≥n breve del producto</p>
                    <div class="flex items-center justify-between mt-2">
                        <div class="text-e-rojo font-bold text-sm">$1.500</div>
                        <button class="add-to-cart-btn bg-e-rojo text-white px-3 py-1 rounded text-xs hover:bg-e-rojo-dark transition-colors" 
                                data-id="D001" data-name="Producto 1" data-price="1500">
                            <i class="fas fa-plus mr-1"></i>Agregar
                </button>
                    </div>
                </div>

                <div class="product-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                    <div class="h-32 rounded-lg mb-3 overflow-hidden">
                        <img src="img/image 2.png" alt="Producto 2" class="w-full h-full object-cover">
                </div>
                    <h3 class="font-semibold text-sm text-gray-800">Producto 2</h3>
                    <p class="text-xs text-gray-600">Descripci√≥n breve del producto</p>
                    <div class="flex items-center justify-between mt-2">
                        <div class="text-e-rojo font-bold text-sm">$2.300</div>
                        <button class="add-to-cart-btn bg-e-rojo text-white px-3 py-1 rounded text-xs hover:bg-e-rojo-dark transition-colors" 
                                data-id="D002" data-name="Producto 2" data-price="2300">
                            <i class="fas fa-plus mr-1"></i>Agregar
                </button>
                    </div>
                </div>

                <div class="product-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                    <div class="h-32 rounded-lg mb-3 overflow-hidden">
                        <img src="img/perfume mujer.png" alt="Producto 3" class="w-full h-full object-cover">
                </div>
                    <h3 class="font-semibold text-sm text-gray-800">Producto 3</h3>
                    <p class="text-xs text-gray-600">Descripci√≥n breve del producto</p>
                    <div class="flex items-center justify-between mt-2">
                        <div class="text-e-rojo font-bold text-sm">$3.100</div>
                        <button class="add-to-cart-btn bg-e-rojo text-white px-3 py-1 rounded text-xs hover:bg-e-rojo-dark transition-colors" 
                                data-id="D003" data-name="Producto 3" data-price="3100">
                            <i class="fas fa-plus mr-1"></i>Agregar
                </button>
                    </div>
                </div>

                <div class="product-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                    <div class="h-32 rounded-lg mb-3 overflow-hidden">
                        <img src="img/perrfume hombre.png" alt="Producto 4" class="w-full h-full object-cover">
                </div>
                    <h3 class="font-semibold text-sm text-gray-800">Producto 4</h3>
                    <p class="text-xs text-gray-600">Descripci√≥n breve del producto</p>
                    <div class="flex items-center justify-between mt-2">
                        <div class="text-e-rojo font-bold text-sm">$1.800</div>
                        <button class="add-to-cart-btn bg-e-rojo text-white px-3 py-1 rounded text-xs hover:bg-e-rojo-dark transition-colors" 
                                data-id="D004" data-name="Producto 4" data-price="1800">
                            <i class="fas fa-plus mr-1"></i>Agregar
                </button>
                    </div>
                </div>

                <div class="product-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                    <div class="h-32 rounded-lg mb-3 overflow-hidden">
                        <img src="img/perfume arabe.png" alt="Producto 5" class="w-full h-full object-cover">
                </div>
                    <h3 class="font-semibold text-sm text-gray-800">Producto 5</h3>
                    <p class="text-xs text-gray-600">Descripci√≥n breve del producto</p>
                    <div class="flex items-center justify-between mt-2">
                        <div class="text-e-rojo font-bold text-sm">$2.700</div>
                        <button class="add-to-cart-btn bg-e-rojo text-white px-3 py-1 rounded text-xs hover:bg-e-rojo-dark transition-colors" 
                                data-id="D005" data-name="Producto 5" data-price="2700">
                            <i class="fas fa-plus mr-1"></i>Agregar
                </button>
                    </div>
        </div>

                <div class="product-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                    <div class="h-32 rounded-lg mb-3 overflow-hidden">
                        <img src="img/image.png" alt="Producto 6" class="w-full h-full object-cover">
                    </div>
                    <h3 class="font-semibold text-sm text-gray-800">Producto 6</h3>
                    <p class="text-xs text-gray-600">Descripci√≥n breve del producto</p>
                    <div class="flex items-center justify-between mt-2">
                        <div class="text-e-rojo font-bold text-sm">$1.200</div>
                        <button class="add-to-cart-btn bg-e-rojo text-white px-3 py-1 rounded text-xs hover:bg-e-rojo-dark transition-colors" 
                                data-id="D006" data-name="Producto 6" data-price="1200">
                            <i class="fas fa-plus mr-1"></i>Agregar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="nosotros" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-3xl font-bold text-e-rojo mb-8">Sobre Nosotros</h2>
                <p class="text-lg text-gray-700 leading-relaxed mb-8">
                    Somos una distribuidora l√≠der en San Rafael, comprometida con brindar productos de calidad 
                    al mejor precio. Con a√±os de experiencia en el mercado, nos especializamos en la distribuci√≥n 
                    de productos de las mejores marcas nacionales e internacionales.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="text-center">
                        <div class="bg-e-rojo text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-truck text-2xl"></i>
                        </div>
                        <h3 class="font-bold text-e-rojo mb-2">Distribuci√≥n R√°pida</h3>
                        <p class="text-gray-600 text-sm">Entregas r√°pidas y confiables en toda la regi√≥n</p>
                    </div>
                    <div class="text-center">
                        <div class="bg-e-rojo text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-star text-2xl"></i>
                        </div>
                        <h3 class="font-bold text-e-rojo mb-2">Calidad Garantizada</h3>
                        <p class="text-gray-600 text-sm">Productos de las mejores marcas del mercado</p>
                    </div>
                    <div class="text-center">
                        <div class="bg-e-rojo text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-handshake text-2xl"></i>
                        </div>
                        <h3 class="font-bold text-e-rojo mb-2">Atenci√≥n Personalizada</h3>
                        <p class="text-gray-600 text-sm">Servicio al cliente de excelencia</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contacto" class="py-16 bg-e-rojo text-white">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-3xl font-bold mb-8">Cont√°ctanos</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="text-center">
                        <i class="fas fa-phone text-3xl mb-4"></i>
                        <h3 class="font-bold mb-2">Tel√©fono</h3>
                        <p>+56 9 1234 5678</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-envelope text-3xl mb-4"></i>
                        <h3 class="font-bold mb-2">Email</h3>
                        <p>contacto@laeconomica.cl</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-map-marker-alt text-3xl mb-4"></i>
                        <h3 class="font-bold mb-2">Ubicaci√≥n</h3>
                        <p>San Rafael, Regi√≥n del Maule</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Cart Modal -->
    <div id="cart-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full max-h-[80vh] overflow-hidden">
                <!-- Cart Header -->
                <div class="bg-e-rojo text-white p-4 flex justify-between items-center">
                    <h3 class="text-lg font-bold">Carrito de Compras</h3>
                    <button id="close-cart-btn" class="text-white hover:text-gray-300">
                        <i class="fas fa-times text-xl"></i>
            </button>
        </div>
                
                <!-- Cart Items -->
                <div id="cart-items" class="p-4 max-h-96 overflow-y-auto">
                    <div id="cart-empty" class="text-center py-8 text-gray-500">
                        <i class="fas fa-shopping-cart text-4xl mb-4"></i>
                        <p>Tu carrito est√° vac√≠o</p>
                    </div>
        </div>
                
                <!-- Cart Footer -->
                <div class="border-t p-4">
            <div class="flex justify-between items-center mb-4">
                        <span class="font-bold text-lg">Total:</span>
                        <span id="cart-total" class="font-bold text-e-rojo text-lg">$0</span>
            </div>
                    <button id="checkout-btn" class="w-full bg-e-rojo text-white py-3 rounded-lg font-bold hover:bg-e-rojo-dark transition-colors">
                        <i class="fas fa-credit-card mr-2"></i>Finalizar Compra
            </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Checkout Modal -->
    <div id="checkout-modal" class="fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black bg-opacity-80 z-[70] p-4 hidden">
        <div class="bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col transform scale-90 opacity-0 border border-gray-700" id="checkout-box">
            <div class="flex justify-between items-center p-5 border-b border-gray-700">
                <h2 class="text-2xl font-bold text-white flex items-center">
                    <i class="fas fa-credit-card text-gray-400 mr-3"></i> Finalizar Compra
                </h2>
                <button id="close-checkout-btn" class="text-gray-500 hover:text-white">
                    <i class="fas fa-times fa-2x"></i>
                </button>
            </div>
            <form class="p-6 overflow-y-auto modal-scroll text-gray-300" id="checkout-form">
                <h3 class="text-xl font-semibold mb-4 text-white flex items-center">
                    <i class="fas fa-user-circle text-e-rojo mr-3"></i> Tus Datos
                </h3>
                    <div class="space-y-4 mb-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                            <label for="nombre" class="block text-sm font-medium text-gray-400">Nombre Completo</label>
                                <div class="relative mt-1">
                                <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-user text-gray-500"></i>
                                </span>
                                <input type="text" id="nombre" class="w-full p-2 pl-10 border rounded-lg bg-gray-700 border-gray-600 focus:ring-e-rojo focus:border-e-rojo text-white" placeholder="Juan P√©rez" required>
                                </div>
                            </div>
                            <div>
                            <label for="rut" class="block text-sm font-medium text-gray-400">RUT</label>
                                <div class="relative mt-1">
                                <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-id-card text-gray-500"></i>
                                </span>
                                <input type="text" id="rut" class="w-full p-2 pl-10 border rounded-lg bg-gray-700 border-gray-600 focus:ring-e-rojo focus:border-e-rojo text-white" placeholder="11.111.111-1" required>
                                </div>
                            </div>
                        </div>
                        <div>
                        <label for="email" class="block text-sm font-medium text-gray-400">Correo Electr√≥nico</label>
                            <div class="relative mt-1">
                            <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-envelope text-gray-500"></i>
                            </span>
                            <input type="email" id="email" class="w-full p-2 pl-10 border rounded-lg bg-gray-700 border-gray-600 focus:ring-e-rojo focus:border-e-rojo text-white" placeholder="juan@correo.com" required>
                            </div>
                        </div>
                        <div>
                        <label for="direccion" class="block text-sm font-medium text-gray-400">Direcci√≥n</label>
                            <div class="relative mt-1">
                            <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-map-marker-alt text-gray-500"></i>
                            </span>
                            <input type="text" id="direccion" class="w-full p-2 pl-10 border rounded-lg bg-gray-700 border-gray-600 focus:ring-e-rojo focus:border-e-rojo text-white" placeholder="Av. Siempre Viva 123" required>
                            </div>
                        </div>
                        <div>
                        <label for="ciudad" class="block text-sm font-medium text-gray-400">Ciudad</label>
                            <div class="relative mt-1">
                            <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-city text-gray-500"></i>
                            </span>
                            <input type="text" id="ciudad" class="w-full p-2 pl-10 border rounded-lg bg-gray-700 border-gray-600 focus:ring-e-rojo focus:border-e-rojo text-white" placeholder="San Rafael" required>
                            </div>
                        </div>
                    </div>
                <h3 class="text-xl font-semibold mb-4 text-white flex items-center">
                    <i class="fas fa-wallet text-e-rojo mr-3"></i> M√©todo de Pago
                </h3>
                    <div class="space-y-4">
                        <div>
                        <input type="radio" name="payment" id="pago-efectivo" class="hidden" checked>
                        <label for="pago-efectivo" class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-700 transition-all border-gray-600">
                            <i class="fas fa-money-bill-wave text-green-400 text-3xl w-10 mr-4"></i>
                                <div>
                                <span class="font-medium text-white">Efectivo</span>
                                <p class="text-xs text-gray-400">Paga al recibir tu pedido.</p>
                                </div>
                            </label>
                        </div>
                        <div>
                        <input type="radio" name="payment" id="pago-transferencia" class="hidden">
                        <label for="pago-transferencia" class="block p-4 border rounded-lg cursor-pointer hover:bg-gray-700 transition-all border-gray-600">
                                <div class="flex items-center">
                                <i class="fas fa-exchange-alt text-blue-400 text-3xl w-10 mr-4"></i>
                                    <div>
                                    <span class="font-medium text-white">Transferencia Bancaria</span>
                                    <p class="text-xs text-gray-400">Sube tu comprobante de pago.</p>
                                    </div>
                                </div>
                            <div id="transfer-details" class="hidden mt-4 pt-4 border-t border-gray-600">
                                    <p class="text-sm font-medium">Datos para transferir:</p>
                                <p class="text-sm font-mono text-gray-400">Cta. Corriente: 12345678 (Banco XYZ)</p>
                                <p class="text-sm font-mono text-gray-400">RUT: 11.111.111-1</p>
                                    <p class="text-sm mt-2 font-medium">Sube tu comprobante:</p>
                                    <div class="file-input-wrapper mt-1">
                                        <button type="button" class="file-input-button">Seleccionar archivo</button>
                                    <input type="file" id="comprobante-file" accept="image/*,.pdf">
                                    </div>
                                <span id="file-name" class="text-sm ml-2 text-gray-500">Ning√∫n archivo...</span>
                                </div>
                            </label>
                        </div>
                        <div>
                        <input type="radio" name="payment" id="pago-mercadopago" class="hidden">
                        <label for="pago-mercadopago" class="block p-4 border rounded-lg cursor-pointer hover:bg-gray-700 transition-all border-gray-600">
                                <div class="flex items-center">
                                <i class="fas fa-credit-card text-cyan-400 text-3xl w-10 mr-4"></i>
                                    <div>
                                    <span class="font-medium text-white">Tarjeta (v√≠a MercadoPago)</span>
                                    <p class="text-xs text-gray-400">Paga de forma segura con tarjetas.</p>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>
            </form>
            <div class="p-6 border-t border-gray-700 bg-gray-900 rounded-b-xl">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-lg font-medium text-white">Total a Pagar:</span>
                    <span id="checkout-total" class="text-3xl font-bold text-e-rojo">$0</span>
                </div>
                <button id="confirm-order-btn" class="w-full bg-e-rojo hover:bg-e-rojo-dark text-white font-bold py-2 rounded-lg text-lg flex items-center justify-center space-x-2 transition-transform active:scale-95">
                    <i class="fas fa-check-circle"></i>
                    <span>Confirmar Pedido</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="fixed inset-0 w-full h-full flex items-center justify-center z-[80] hidden" style="background-color: rgba(0,0,0,0.8);">
        <div id="success-modal-box" class="bg-gray-800 rounded-lg shadow-2xl p-8 max-w-sm mx-auto text-center transform scale-90 opacity-0 border border-gray-700">
            <div class="w-20 h-20 bg-green-900/50 rounded-full flex items-center justify-center mx-auto border-2 border-green-500">
                <i class="fas fa-check text-green-500 text-5xl"></i>
            </div>
            <h2 class="text-3xl font-bold text-white mt-6 mb-3">¬°Pedido Confirmado!</h2>
            <p class="text-lg text-gray-400 mb-8">Gracias por tu compra. Tu pedido ser√° procesado. Se enviar√° la boleta a tu correo.</p>
            <button id="close-success-btn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 rounded-lg text-lg">Aceptar</button>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="font-bold text-lg">La Econ√≥mica San Rafael</p>
            <p class="text-gray-400">Distribuidora del Maule</p>
        </div>
    </footer>

    <!-- Floating WhatsApp -->
    <div class="floating-whatsapp">
        <a href="https://wa.me/56912345678" target="_blank" class="flex items-center space-x-3 bg-green-500 text-white px-4 py-3 rounded-full shadow-lg hover:bg-green-600 transition-colors">
            <i class="fab fa-whatsapp text-xl"></i>
            <span class="hidden sm:block">Necesitas Ayuda? Conversemos!</span>
        </a>
    </div>

    <!-- JavaScript -->
    <script>
        // Cart functionality
        let cart = [];
        
        // DOM elements
        const openCartBtn = document.getElementById('open-cart-btn');
        const closeCartBtn = document.getElementById('close-cart-btn');
        const cartModal = document.getElementById('cart-modal');
        const cartItems = document.getElementById('cart-items');
        const cartEmpty = document.getElementById('cart-empty');
        const cartTotal = document.getElementById('cart-total');
        const cartCount = document.getElementById('cart-count');
        const checkoutBtn = document.getElementById('checkout-btn');
        const checkoutModal = document.getElementById('checkout-modal');
        const checkoutBox = document.getElementById('checkout-box');
        const closeCheckoutBtn = document.getElementById('close-checkout-btn');
        const successModal = document.getElementById('success-modal');
        const successModalBox = document.getElementById('success-modal-box');
        const closeSuccessBtn = document.getElementById('close-success-btn');

        // Add to cart function
        function addToCart(e) {
            const button = e.target.closest('.add-to-cart-btn');
            if (!button) return;
            
            const id = button.dataset.id;
            const name = button.dataset.name;
            const price = parseInt(button.dataset.price);
            
            const existingItem = cart.find(item => item.id === id);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ id, name, price, quantity: 1 });
            }
            
            updateCartUI();
            
            // Animation
            gsap.fromTo(button, { scale: 1 }, { scale: 1.2, duration: 0.2, yoyo: true, repeat: 1, ease: "elastic.out(1, 0.3)" });
        }

        // Update cart UI
        function updateCartUI() {
            // Update cart count
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            // Update cart items
            if (cart.length === 0) {
                cartEmpty.style.display = 'block';
                cartItems.innerHTML = '<div id="cart-empty" class="text-center py-8 text-gray-500"><i class="fas fa-shopping-cart text-4xl mb-4"></i><p>Tu carrito est√° vac√≠o</p></div>';
            } else {
                cartEmpty.style.display = 'none';
                cartItems.innerHTML = cart.map(item => `
                    <div class="flex items-center justify-between py-3 border-b border-gray-200">
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-800">${item.name}</h4>
                            <p class="text-sm text-gray-600">$${item.price.toLocaleString()}</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="quantity-btn bg-gray-200 text-gray-700 w-6 h-6 rounded-full flex items-center justify-center hover:bg-gray-300" data-action="decrease" data-id="${item.id}">
                                <i class="fas fa-minus text-xs"></i>
                            </button>
                            <span class="quantity-display w-8 text-center">${item.quantity}</span>
                            <button class="quantity-btn bg-gray-200 text-gray-700 w-6 h-6 rounded-full flex items-center justify-center hover:bg-gray-300" data-action="increase" data-id="${item.id}">
                                <i class="fas fa-plus text-xs"></i>
                            </button>
                            <button class="remove-btn text-red-500 hover:text-red-700 ml-2" data-id="${item.id}">
                                <i class="fas fa-trash text-sm"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            }
            
            // Update total
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartTotal.textContent = `$${total.toLocaleString()}`;
        }

        // Handle cart interactions
        function handleCartClick(e) {
            if (e.target.closest('.quantity-btn')) {
                const button = e.target.closest('.quantity-btn');
                const action = button.dataset.action;
                const id = button.dataset.id;
                const item = cart.find(item => item.id === id);
                
                if (action === 'increase') {
                    item.quantity++;
                } else if (action === 'decrease' && item.quantity > 1) {
                    item.quantity--;
                }
                
                updateCartUI();
            } else if (e.target.closest('.remove-btn')) {
                const button = e.target.closest('.remove-btn');
                const id = button.dataset.id;
                cart = cart.filter(item => item.id !== id);
                updateCartUI();
            }
        }

        // Checkout functions
        function openCheckout() {
            if (cart.length === 0) {
                alert('Tu carrito est√° vac√≠o');
                return;
            }
            
            // Update checkout total
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('checkout-total').textContent = `$${total.toLocaleString()}`;
            
            // Show checkout modal
            checkoutModal.classList.remove('hidden');
            gsap.fromTo(checkoutBox, { scale: 0.9, opacity: 0 }, { scale: 1, opacity: 1, duration: 0.3, ease: "power2.out" });
        }

        function closeCheckout() {
            gsap.to(checkoutBox, { scale: 0.9, opacity: 0, duration: 0.3, ease: "power2.in", onComplete: function() {
                checkoutModal.classList.add('hidden');
            }});
        }

        function openSuccessModal() {
            successModal.classList.remove('hidden');
            gsap.fromTo(successModalBox, { scale: 0.9, opacity: 0 }, { scale: 1, opacity: 1, duration: 0.3, ease: "power2.out" });
        }

        function closeSuccessModal() {
            gsap.to(successModalBox, { scale: 0.9, opacity: 0, duration: 0.3, ease: "power2.in", onComplete: function() {
                successModal.classList.add('hidden');
            }});
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Check for payment success
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('payment') === 'success') {
                // Clear cart
                cart = [];
                updateCartUI();
                
                // Show success message
                const successMessage = document.createElement('div');
                successMessage.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                successMessage.innerHTML = '<i class="fas fa-check-circle mr-2"></i>¬°Pago realizado con √©xito!';
                document.body.appendChild(successMessage);
                
                // Animate success message
                gsap.fromTo(successMessage, { x: 300, opacity: 0 }, { x: 0, opacity: 1, duration: 0.5, ease: "power2.out" });
                
                // Remove success message after 5 seconds
                setTimeout(() => {
                    gsap.to(successMessage, { x: 300, opacity: 0, duration: 0.5, ease: "power2.in", onComplete: () => {
                        document.body.removeChild(successMessage);
                    }});
                }, 5000);
                
                // Clean URL
                window.history.replaceState({}, document.title, window.location.pathname);
            }
            
            // Animations
            gsap.from("nav", { duration: 0.8, y: -50, opacity: 0, ease: "power2.out" });
            gsap.from(".hero-gradient", { duration: 1, opacity: 0, y: 50, delay: 0.2, ease: "power3.out" });
            gsap.from(".grid > div", { duration: 0.6, y: 30, opacity: 0, stagger: 0.1, delay: 0.8, ease: "power2.out" });
            
            // Cart event listeners
            document.addEventListener('click', (e) => {
                if (e.target.closest('.add-to-cart-btn')) {
                    addToCart(e);
                }
            });
            
            if (openCartBtn) openCartBtn.addEventListener('click', () => {
                cartModal.classList.remove('hidden');
                gsap.from(cartModal, { duration: 0.3, opacity: 0, scale: 0.9, ease: "power2.out" });
            });
            
            if (closeCartBtn) closeCartBtn.addEventListener('click', () => {
                cartModal.classList.add('hidden');
            });
            
            if (cartItems) cartItems.addEventListener('click', handleCartClick);
            
            if (checkoutBtn) checkoutBtn.addEventListener('click', openCheckout);
            if (closeCheckoutBtn) closeCheckoutBtn.addEventListener('click', closeCheckout);
            if (closeSuccessBtn) closeSuccessBtn.addEventListener('click', closeSuccessModal);
            
            // Payment method selection
            const paymentRadios = document.querySelectorAll('input[name="payment"]');
            paymentRadios.forEach(radio => {
                radio.addEventListener('change', (e) => {
                    const transferDetails = document.getElementById('transfer-details');
                    if (e.target.id === 'pago-transferencia') {
                        transferDetails.classList.remove('hidden');
                    } else {
                        transferDetails.classList.add('hidden');
                    }
                });
            });
            
            // File input for transfer
            const fileInput = document.getElementById('comprobante-file');
            const fileNameEl = document.getElementById('file-name');
            if (fileInput && fileNameEl) {
                fileInput.addEventListener('change', () => {
                    fileNameEl.textContent = fileInput.files[0] ? fileInput.files[0].name : 'Ning√∫n archivo...';
                });
            }
            
            // Confirm order
            const confirmOrderBtn = document.getElementById('confirm-order-btn');
            if (confirmOrderBtn) {
                confirmOrderBtn.addEventListener('click', (e) => {
                e.preventDefault();
                const form = document.getElementById('checkout-form');
                    if (!form) return;
                
                if (!form.checkValidity()) {
                    form.reportValidity();
                    alert('Por favor, completa todos los campos de "Tus Datos".');
                    return;
                }

                    const selectedPaymentRadio = document.querySelector('input[name="payment"]:checked');
                    if (!selectedPaymentRadio) {
                        alert('Por favor, selecciona un m√©todo de pago.');
                        return;
                    }
                    const selectedPayment = selectedPaymentRadio.id;
                
                if (selectedPayment === 'pago-mercadopago') {
                        let totalText = cartTotal.textContent.replace('$', '').replace(/\./g, '');
                    let total = parseInt(totalText);
                        window.location.href = `mercadopago.html?total=${total}&origin=distribuidora`;
                } else {
                        closeCheckout();
                        setTimeout(() => { openSuccessModal(); }, 300);
                        cart = [];
                        updateCartUI();
                    }
                });
            }
            
            // Close modal on backdrop click
            cartModal.addEventListener('click', (e) => {
                if (e.target === cartModal) {
                    cartModal.classList.add('hidden');
                }
            });
            
            checkoutModal.addEventListener('click', (e) => {
                if (e.target === checkoutModal) {
                    closeCheckout();
                }
            });
            
            updateCartUI();
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Mobile menu functionality
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const closeMobileMenuBtn = document.getElementById('close-mobile-menu');
        const mobileMenu = document.getElementById('mobile-menu');

        function openMobileMenu() {
            mobileMenu.classList.remove('translate-x-full');
            mobileMenu.classList.add('translate-x-0');
        }

        function closeMobileMenu() {
            mobileMenu.classList.remove('translate-x-0');
            mobileMenu.classList.add('translate-x-full');
        }

        if (mobileMenuBtn) mobileMenuBtn.addEventListener('click', openMobileMenu);
        if (closeMobileMenuBtn) closeMobileMenuBtn.addEventListener('click', closeMobileMenu);
        if (mobileMenu) mobileMenu.addEventListener('click', (e) => {
            if (e.target === mobileMenu) closeMobileMenu();
        });

        // Close mobile menu when clicking on navigation links
        const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');
        mobileMenuLinks.forEach(link => {
            link.addEventListener('click', closeMobileMenu);
        });
    </script>
</body>
</html>